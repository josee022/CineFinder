<div class="filters-container">
  <h2 class="filters-title">{{ 'filters.title' | translate }}</h2>
  
  <form [formGroup]="filtersForm" class="filters-form">
    <!-- Ordenar por -->
    <div class="filter-section">
      <h3 class="section-title">{{ 'filters.sortBy' | translate }}</h3>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ 'filters.sortBy' | translate }}</mat-label>
        <mat-select formControlName="sortBy">
          @for (option of sortOptions; track option.value) {
            <mat-option [value]="option.value">{{ option.label | translate }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>
    
    <mat-divider></mat-divider>
    
    <!-- Año -->
    <div class="filter-section">
      <h3 class="section-title">{{ 'filters.year' | translate }}</h3>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ 'filters.selectYear' | translate }}</mat-label>
        <mat-select formControlName="year">
          <mat-option [value]="null">{{ 'filters.allYears' | translate }}</mat-option>
          @for (year of years; track year) {
            <mat-option [value]="year">{{ year }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>
    
    <mat-divider></mat-divider>
    
    <!-- Géneros -->
    <div class="filter-section">
      <h3 class="section-title">{{ 'filters.genres' | translate }}</h3>
      @if (isLoading) {
        <div class="loading-genres">
          <div class="spinner"></div>
          <p>{{ 'filters.loadingGenres' | translate }}</p>
        </div>
      } @else {
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'filters.selectGenres' | translate }}</mat-label>
          <mat-select formControlName="genres" multiple [compareWith]="compareGenres">
            @for (genre of genres; track genre.id) {
              <mat-option [value]="genre.id">{{ genre.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      }
    </div>
    
    <mat-divider></mat-divider>
    
    <!-- Valoración mínima -->
    <div class="filter-section">
      <h3 class="section-title">{{ 'filters.minRating' | translate }}</h3>
      <div class="rating-slider">
        <mat-slider min="0" max="10" step="0.5" discrete class="full-width">
          <input matSliderThumb formControlName="voteAverageGte">
        </mat-slider>
        <div class="rating-value">{{ filtersForm.get('voteAverageGte')?.value || 0 }}</div>
      </div>
    </div>
    
    <mat-divider></mat-divider>
    
    <!-- Incluir contenido para adultos -->
    <div class="filter-section">
      <mat-checkbox formControlName="includeAdult" color="primary">
        {{ 'filters.includeAdult' | translate }}
      </mat-checkbox>
    </div>
    
    <div class="filter-actions">
      <button mat-raised-button color="warn" (click)="resetFilters()">
        <mat-icon>refresh</mat-icon>
        {{ 'filters.reset' | translate }}
      </button>
      <button mat-raised-button color="primary" type="button" (click)="applyFilters()">
        <mat-icon>filter_list</mat-icon>
        {{ 'filters.apply' | translate }}
      </button>
    </div>
  </form>
</div>
